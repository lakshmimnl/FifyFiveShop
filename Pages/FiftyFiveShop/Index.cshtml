@page
@model FifyFiveShop.Pages.FiftyFiveShop.IndexModel
<br />

<div class="container row p-0 m-0">
    <div class="col-6">
        <h2 class="text-info">Products List</h2>
    </div>
    <div class="col-3">
        <a asp-page="CreateProduct" class="btn btn-info form-control text-white">Create New Product</a>
    </div>
    <div class="col-3">
        <a asp-page="CreateRule" class="btn btn-info form-control text-white">Create New Product Rule</a>
    </div>
</div>


<form method="post">
    <div class="col-12 border p-3 mt-3">
        @if (Model.Products.Count() > 0)
        {
            <table class="table table-striped border">
                <tr class="table-secondary">
                    <th>
                        <label asp-for="Products.FirstOrDefault().SKU"></label>
                    </th>
                    <th>

                        <label asp-for="Products.FirstOrDefault().UnitPrice"></label>
                    </th>



                </tr>
                @foreach (var item in Model.Products)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(m => item.SKU)
                        </td>
                        <td>
                            @Html.DisplayFor(m => item.UnitPrice)
                        </td>

                        <td>
                            <button asp-page-handler="Delete" asp-route-id="@item.Id" onclick="return confirm('Are you sure you want to delete?')" class="btn btn-danger btn-sm">Delete</button>
                            <a asp-page="Edit" asp-route-id="@item.Id" class="btn btn-success btn-sm text-white">Edit</a>
                        </td>
                    </tr>
                }
            </table>
        }
        else
        {
            <p>No Products available.</p>
        }
    </div>
    <br />
    <br />
    <div class="col-12 border p-3 mt-3">
        @if (Model.PriceRules.Count() > 0)
        {
            <table class="table table-striped border">
                <tr class="table-secondary">
                    <th>
                        <label asp-for="PriceRules.FirstOrDefault().SKU"></label>
                    </th>
                    <th>

                        <label asp-for="PriceRules.FirstOrDefault().Quantity"></label>
                    </th>

                    <th>

                        Special Price
                    </th>

                </tr>
                @foreach (var item in Model.PriceRules)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(m => item.SKU)
                        </td>
                        <td>
                            @Html.DisplayFor(m => item.Quantity)
                        </td>
                        <td>
                            @Html.DisplayFor(m => item.Price)
                        </td>
                        <td>
                            <button asp-page-handler="Delete" asp-route-id="@item.Id" onclick="return confirm('Are you sure you want to delete?')" class="btn btn-danger btn-sm">Delete</button>
                            <a asp-page="Edit" asp-route-id="@item.Id" class="btn btn-success btn-sm text-white">Edit</a>
                        </td>
                    </tr>
                }
            </table>
        }
        else
        {
            <p>No Price Rules available.</p>
        }
    </div>


        <input type="hidden" asp-for="Transaction" />
        <input id="tran" name="tran" asp-for="Transaction" type="text" />

        <br />
        <input type="submit" value="CheckOut" class="btn btn-primary form-control" asp-route-tran="@Model.Transaction" />

        <label id="lblSum" asp-for="TotalSum" name="totalSum">@ViewData["Total"]</label>

</form>


<div class="container row p-0 m-0">
    <div class="col-3">
     
        <a asp-page="AddToCart" class="btn btn-info form-control text-white">Add Products to Cart</a>
    </div>
</div>

